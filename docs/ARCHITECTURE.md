# **SM Codex Portal · ARCHITECTURE (Full Edition)**

**Последнее обновление:** актуальная версия после рефакторинга калькуляторов, удаления дублей и стандартизации модулей.

---

## **1. Обзор проекта**

**SM Codex Portal** — полностью модульный, масштабируемый и документируемый портал для всех внутренних регламентов компании «Стандарт Мастер».

### **Назначение портала**

* единый источник правды (SSOT — *single source of truth*) для всех процессов компании;
* учебная платформа для новых сотрудников;
* справочник действий и решений для техподдержки, внедрения и продаж;
* рабочее пространство, где сотрудники получают всё необходимое для выполнения задач.

### **Технологическая основа**

* SPA (Single Page Application);
* Vanilla JS + ES Modules;
* архитектура с lazy-loading модулей;
* переиспользуемые UI/логические компоненты;
* единый стиль и структура.

---

## **2. Цели архитектуры**

### ✔ Гибкость

Разделы можно менять, удалять, расширять без риска сломать проект.

### ✔ Масштабируемость

Добавление новых модулей (например, HR, Финансовый отдел) занимает минуты.

### ✔ Лёгкость поддержки

Минимум глобального кода — максимум чистых и изолированных модулей.

### ✔ Читаемость

Каждый файл делает только то, что должен.

### ✔ Единый стиль и UX

Пользователь получает одинаковый опыт в любом разделе.

---

## **3. Принципы разработки проекта**

Проект основан на лучших практиках разработки.

### **3.1. Clean Architecture внутри front-end**

Каждый модуль — изолированная функциональная единица, не влияющая на другие.

### **3.2. Чёткие зоны ответственности**

* Модули страниц: `/js/modules/...`
* Модули функциональности: `/js/calculators`
* Общие компоненты: `/js/modules/quiz`, `/js/core/...`

### **3.3. Single Responsibility Principle**

Каждый файл отвечает за одну задачу.

### **3.4. DRY (Don't Repeat Yourself)**

Повторяющийся код вынесен:

* в `core.js`;
* в поп-апы;
* в `templates.js`.

### **3.5. Связность > Распределённость**

Калькуляторы находятся в одном месте, чтобы:

* не дублировать код,
* иметь единое место обновлений,
* исключать логические ошибки.

---

## **4. Функциональные блоки проекта**

### **4.1. Router**

**Статус:** стабильный, расширяемый.

**Функции:**

* регистрация разделов;
* lazy-loading модулей;
* поддержка `destroy()`;
* предотвращение утечек памяти.

**Преимущества:**

* минимальная сложность;
* высокая предсказуемость;
* полная прозрачность последовательности действий.

---

### **4.2. Разделы (Modules)**

Каждый раздел:

* имеет собственный `main.js`;
* использует подменю (subnav);
* управляет секциями через `data-target`;
* полностью самостоятельный.

**Принцип:**
Раздел — это независимое *mini-app* внутри SPA.
Это золотой стандарт масштабируемых систем.

---

### **4.3. Квизовый двигатель**

Реализует:

* загрузку JSON-структуры;
* отображение вопросов;
* модальный UI;
* обработку результата;
* подсказки по ответам.

Компонент полностью независим и может быть встроен в любой другой проект.

---

### **4.4. Калькуляторный модуль**

После рефакторинга модуль стал:

* унифицированным;
* независимым от разделов;
* централизованным;
* легко расширяемым.

Каждый калькулятор содержит:

* шаблон в `templates.js`;
* бизнес-логику в `/js/calculators/*.js`;
* блок отображения в разделе **«Калькуляторы»**.

Это гарантирует отсутствие расхождений логики.

---

## **5. Стилизация и UI-компоненты**

Портал основан на:

* общей сетке (`card-grid`, `onboarding-grid`);
* едином стиле карточек (`card`, `card--soft`);
* едином стиле модальных окон;
* унифицированном компоненте подменю.

Каждый UI-элемент следует:

* единым отступам,
* единому шрифту,
* общей визуальной логике.

---

## **6. Данные (квизы, справочники)**

Используется формат **JSON**, потому что он:

* легко поддерживается;
* легко расширяется;
* легко мигрируется;
* легко тестируется.

---

## **7. Типичные задачи, которые решает портал**

### **7.1. Адаптация нового L1**

* В первые 30 минут понимает работу поддержки.
* Через 1–2 дня уверенно решает базовые кейсы.
* Через неделю понимает обязанности соседних ролей.

---

### **7.2. Диагностика L2 задач**

* Быстрый доступ к зонам ответственности.
* Быстрый доступ к кейсам.
* Понимание, что должен делать L1 и когда эскалировать.

---

### **7.3. Подготовка нового инженера внедрения**

* Чёткий 3-месячный цикл обучения.
* Принципы работы отдела.
* Типовые кейсы.

---

### **7.4. Работа отдела продаж**

* Скрипты;
* Обработка возражений;
* Логика взаимодействия с клиентами.

---

### **7.5. Обучение через квизы**

* Проверка знаний;
* Интерактивные тренировочные сценарии.

---

### **7.6. Расчёт мотивации**

* Полностью централизован;
* Исключает ошибки;
* Автоматически подстраивается под обновления бизнес-логики.


