SM Codex Portal · ARCHITECTURE (Full Edition)
Последнее обновление: актуальная версия после рефакторинга калькуляторов, удаления дублей и стандартизации модулей.
1. Обзор проекта

SM Codex Portal — это полностью модульный, масштабируемый, документируемый портал для всех внутренних регламентов компании «Стандарт Мастер».

Это:

единый источник правды (SSOT — single source of truth) для всех процессов компании;

учебная платформа для новых сотрудников;

справочник действий и решений для техподдержки, внедрения и продаж;

рабочее пространство, где сотрудники получают всё необходимое для выполнения задач.

Портал построен как:

SPA (Single Page Application)

Vanilla JS + ES Modules

архитектура с lazy-loading модулей

переиспользуемые компоненты (UI/логика)

единый стиль и единая структура

2. Цели архитектуры
✔ Гибкость

Разделы можно менять, удалять, расширять без риска сломать проект.

✔ Масштабируемость

Добавление новых модулей (например, HR, Финансовый отдел) занимает считанные минуты.

✔ Лёгкость поддержки

Минимум глобального кода — максимум чистых изолированных модулей.

✔ Читаемость

Каждый файл делает только то, что должен.

✔ Единый стиль и опыт

Пользователь чувствует себя одинаково комфортно в любом разделе.

3. Принципы разработки проекта

Этот проект придерживается лучших практик разработки, включая:

3.1. Clean Architecture внутри front-end

Каждый модуль — изолированная функциональная единица, не влияющая на другие.

3.2. Чёткие зоны ответственности

Модули страниц (/js/modules/...)

Модули функциональности (/js/calculators)

Модули общих компонентов (/js/modules/quiz, /js/core/...)

3.3. Single Responsibility Principle

Каждый файл отвечает за одну вещь.

3.4. DRY (Don't Repeat Yourself)

Весь дублирующийся код вынесен:

в core.js

в поп-апы

в templates.js

3.5. Связность > Распределённость

Калькуляторы вынесены в единое место, чтобы:

не дублировать код,

иметь единое место обновления,

избегать ошибок в логике.

4. Функциональные блоки проекта
4.1. Router

Статус: стабильный, расширяемый.

Функции:

регистрирует разделы,

lazy-loading модулей,

поддержка destroy(),

предотвращение утечек памяти.

Преимущества:

минимальная сложность,

высокая предсказуемость,

абсолютная прозрачность последовательности действий.

4.2. Разделы (Modules)

Каждый раздел:

имеет собственный main.js

использует подменю (subnav)

управляет секциями через data-target

работает самостоятельно, не зависит от других страниц

Принцип:

Раздел — это самостоятельный mini-app внутри SPA.

Это золотой стандарт для масштабируемых систем.

4.3. Квизовый двигатель

Реализует:

загрузку JSON структуры

отображение вопросов

модальный UI

обработку результата

подсказки по ответам

Написан как полноценный независимый компонент: можно подключить в любой другой проект.

4.4. Калькуляторный модуль

После рефакторинга стал:

унифицированным

независимым от разделов

централизованным

легко расширяемым

Каждый калькулятор имеет:

свой шаблон (в templates.js)

свою бизнес-логику (в /js/calculators/*.js)

свой блок отображения в одном месте (раздел "Калькуляторы")

Это полностью исключает любую расхожесть логики.

5. Стилизация и UI-компоненты

Портал опирается на:

Единую сетку (card-grid, onboarding-grid)

Единый стиль карточек (card, card--soft)

Единый стиль модальных окон

Единый компонент подменю

Каждый UI-компонент соответствует:

единым отступам,

единому шрифту,

единой визуальной логике.

6. Данные (квизы, справочники)

Формат JSON выбран по ряду причин:

легко поддерживать,

легко добавлять,

легко мигрировать,

легко тестировать.

7. Набор типичных задач, которые закрывает портал
7.1. Адаптация нового L1

В первые 30 минут понимает, как работает поддержка.

Через 1–2 дня — уверенно решает базовые кейсы.

Через 1 неделю понимает обязанности соседних ролей.

7.2. Диагностика L2 задач

Быстрый доступ к зонам ответственности.

Быстрый доступ к кейсам.

Понимание, что должно делать L1, и когда эскалировать.

7.3. Подготовка нового инженера внедрения

Чёткий 3-месячный цикл.

Принципы работы отдела.

Типовые кейсы.

7.4. Работа отдела продаж

Скрипты.

Обработка возражений.

Логика взаимодействия с клиентами.

7.5. Обучение через квизы

Проверка знаний.

Интерактивные тренировочные сценарии.

7.6. Расчёт мотивации

Полностью централизован.

Не допускает ошибок.

Подстраивается под обновления бизнес-логики.
